<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>storekeeper</title>
    <style>
        
    </style>
</head>
<body>

        
        <div class="table">
            <label for="d_name">
                Name
            </label>

            <input type="text" 
            name="d_name" 
            id="d_name">

        </div>

        <div class="table">
            <label for="d_unit">
                Unit
            </label>
            <input type="number"
             name="d_unit"
              id="d_unit">

        </div>


        <div class="table">
            <label for="d_price">
                Quantity 
            </label>
            <input type="text"
             name="d_price"
              id="d_price">

        </div>

        <div class="table2">
            <div class="b_t">

            <input class="submit"
             id="submit"
            type="button" 
            value="load">

            <input 
            type="button" 
            id="cancel"
            value="update">

          </div>
            

        </div>
        

    
    <script>
        //register serviceworker 

        const 
        registerServiceWorker = 
        async () =>
         {
        if (
          'serviceWorker' in
            navigator
        ) {
        try {
        const registration = 
        await navigator
        .serviceWorker
        .register(
         'app.js',
          {
             scope: '/storekeeper/',
          }
        );
        if (
        registration
        .installing
        ) {
        console
        .log('Service worker installing');
         } else if (
        registration
        .waiting) 
        {
         console
         .log('Service worker installed');
        } else if (registration.active) {
       //  console.log('Service worker active');
        }
        } catch (error) {
        console
        .error(`Registration failed with ${error}`);
         }
      }
   };
     registerServiceWorker();

     function Drug(name,unit,price){
        this.name = name;
        this.unit = unit;
        this.price = price;
     }

 const  submit = document.
 getElementById('submit');

 const d_name = document
 .getElementById('d_name').value;

 const d_unit = document
 .getElementById('d_unit').value;

 const d_price = document
 .getElementById('d_price').value;


 submit
 .addEventListener
 ( 
 'click',function(e){
    console.log('kabeer');
    navigator
    .serviceWorker
   .controller
    .postMessage(
       new Drug(d_name,d_unit,d_price)
    );
 }
 
 );    
    </script>
</body>
</html>
